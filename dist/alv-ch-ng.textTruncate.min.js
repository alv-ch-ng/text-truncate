/* alv-ch-ng.text-truncate - 0.2.0 - 2015-03-06 - Copyright (c) 2015 Informatik der Arbeitslosenversicherung; */
!function(){"use strict";var a=angular.module("alv-ch-ng.text-truncate",[]);a.directive("ngTextTruncate",function(a,b,c,d){return{restrict:"A",scope:{text:"=ngTextTruncate",charsThreshould:"@ngTtCharsThreshold",wordsThreshould:"@ngTtWordsThreshold",customMoreLabel:"@ngTtMoreLabel",customLessLabel:"@ngTtLessLabel"},controller:function(a,b){a.toggleShow=function(){a.open=!a.open},a.useToggling=void 0===b.ngTtNoToggling},link:function(a,e){a.open=!1,b.failIfWrongThreshouldConfig(a.charsThreshould,a.wordsThreshould);var f=parseInt(a.charsThreshould),g=parseInt(a.wordsThreshould);a.$watch("text",function(){e.empty(),f?a.text&&c.truncationApplies(a,f)?c.applyTruncation(f,a,e):e.append(a.text):a.text&&d.truncationApplies(a,g)?d.applyTruncation(g,a,e):e.append(a.text)})}}}),a.factory("ValidationServices",function(){return{failIfWrongThreshouldConfig:function(a,b){if(!a&&!b||a&&b)throw"You must specify one, and only one, type of threshould (chars or words)"}}}),a.factory("CharBasedTruncation",function(a){return{truncationApplies:function(a,b){return a.text.length>b},applyTruncation:function(b,c,d){var e=c.customMoreLabel||"<span translate='common_text_truncate_more'></span>",f=c.customLessLabel||"<span translate='common_text_truncate_less'></span>";if(c.useToggling){var g=angular.element("<span>"+c.text.substr(0,b)+"<span ng-show='!open'>...</span><span class='btn-link ngTruncateToggleText' ng-click='toggleShow()' ng-show='!open'>"+e+"</span><span ng-show='open'>"+c.text.substring(b)+"<span class='btn-link ngTruncateToggleText' ng-click='toggleShow()'>"+f+"</span></span></span>");a(g)(c),d.append(g)}else d.append(c.text.substr(0,b)+"...")}}}),a.factory("WordBasedTruncation",function(a){return{truncationApplies:function(a,b){return a.text.split(" ").length>b},applyTruncation:function(b,c,d){var e=c.customMoreLabel||"<span translate='common_text_truncate_more'></span>",f=c.customLessLabel||"<span translate='common_text_truncate_less'></span>",g=c.text.split(" ");if(c.useToggling){var h=angular.element("<span>"+g.slice(0,b).join(" ")+"<span ng-show='!open'>...</span>&nbsp;<span class='btn-link ngTruncateToggleText' ng-click='toggleShow()' ng-show='!open'>"+e+"</span><span ng-show='open'>"+g.slice(b,g.length).join(" ")+"<span class='btn-link ngTruncateToggleText' ng-click='toggleShow()'>"+f+"</span></span></span>");a(h)(c),d.append(h)}else d.append(g.slice(0,b).join(" ")+"...")}}})}();